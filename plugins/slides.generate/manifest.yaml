id: slides.generate
name: "Slides: Generate Presentation"   # <-- quoted to allow the colon
version: "0.3.1"
category: slides
summary: "Create slides from a prompt or a Word (DOCX/TXT) file, render HTML, export PDF."
runtime: dsl
entrypoint: ./flow.yaml

permissions:
  - fs_read
  - fs_write

inputs:
  $schema: "https://json-schema.org/draft/2020-12/schema"
  type: object
  required: [source, language]
  properties:
    project_id:
      type: string
      description: "Optional project id to co-locate artifacts."
    source:
      type: string
      enum: [prompt, docx]
    topic:
      type: string
      description: "Topic/title when source=prompt."
    docx_url:
      type: string
      description: |
        Local path, file:// URL, or /artifacts/... URL for the document.
    language:
      type: string
      enum: [ar, en]
      default: ar
    slides_count:
      type: integer
      minimum: 3
      maximum: 30
      default: 12
    theme:
      type: string
      default: academic-ar
    images_query_pack:
      type: array
      items: { type: string }

  allOf:
    - if:
        properties: { source: { const: prompt } }
      then:
        required: [topic]
    - if:
        properties: { source: { const: docx } }
      then:
        required: [docx_url]
